direction: down

title: {
  label: Event Bus - Component Diagram
  near: top-center
  shape: text
  style.font-size: 20
  style.bold: true
}

# External sources
external-services: External Services {
  shape: rectangle
  style.fill: "#08427B"
  style.font-color: "#ffffff"
}

# Event Bus components
event-patterns: Event Patterns {
  shape: rectangle
  style.fill: "#438DD5"
  style.font-color: "#ffffff"
  label: |md
    **Event Patterns**
    OrderCompleted
    CriticalAlert
    UserSignup
  |
}

event-rules: Event Rules {
  shape: rectangle
  style.fill: "#438DD5"
  style.font-color: "#ffffff"
  label: |md
    **Event Rules**
    Match events by source/detail-type
    Route to target Lambda
  |
}

# External dependency
notification-router: Notification Router (Lambda) {
  shape: rectangle
  style.fill: "#999999"
  style.font-color: "#ffffff"
}

# Flows
external-services -> event-patterns: "PutEvents to\ncustom bus"
event-patterns -> event-rules: "Pattern matching"
event-rules -> notification-router: "Invoke Lambda\nwith event payload"
